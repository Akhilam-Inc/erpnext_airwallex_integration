{% extends "templates/docs_page.html" %}

{% block title %}Bank Account Configuration - Bank Integration Documentation{% endblock %}

{% block page_title %}Bank Account Configuration{% endblock %}
{% block page_subtitle %}Configure bank accounts for your Airwallex clients{% endblock %}

{% block page_content %}
<h1>Bank Account Configuration</h1>

<p>Each Airwallex client is directly mapped to a specific ERPNext bank account. All transactions from that client will be recorded in its assigned bank account.</p>

<h2>Understanding the New Architecture</h2>

<p>With the updated architecture, each Airwallex client has a direct 1:1 relationship with an ERPNext bank account:</p>

<ul>
    <li>üè¶ <strong>One Client = One Bank Account:</strong> Each Airwallex client is assigned to a specific bank account</li>
    <li>üí∞ <strong>Simple Mapping:</strong> No complex currency-based mapping needed</li>
    <li>üìä <strong>Clear Segregation:</strong> Transactions are clearly separated by client</li>
    <li>‚öñÔ∏è <strong>Easy Reconciliation:</strong> Each client's transactions go to their designated account</li>
</ul>

<h2>Setting Up Bank Accounts in ERPNext</h2>

<h3>Creating Bank Accounts for Each Client</h3>
<ol>
    <li>Navigate to <strong>Accounting ‚Üí Bank Account</strong></li>
    <li>Click <strong>"New"</strong></li>
    <li>Configure the account:
        <ul>
            <li><strong>Account Name:</strong> Descriptive name (e.g., "Airwallex Client A - USD")</li>
            <li><strong>Bank:</strong> Select or create "Airwallex"</li>
            <li><strong>Account:</strong> Link to Chart of Accounts bank account</li>
            <li><strong>Currency:</strong> Select the primary currency for this client</li>
            <li><strong>Company:</strong> Select the appropriate company</li>
        </ul>
    </li>
    <li>Save the bank account</li>
</ol>

<h2>Client-Bank Account Mapping</h2>

<h3>Configuring Airwallex Clients</h3>
<ol>
    <li>Open <strong>Bank Integration Setting</strong></li>
    <li>In the <strong>Airwallex Clients</strong> table, add each client</li>
    <li>For each client, configure:
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Bank Account</strong></td>
                    <td>ERPNext bank account for this client</td>
                    <td>Airwallex Client A - USD</td>
                </tr>
                <tr>
                    <td><strong>Airwallex Client ID</strong></td>
                    <td>Unique client identifier from Airwallex</td>
                    <td>app_abc123def456</td>
                </tr>
                <tr>
                    <td><strong>Airwallex API Key</strong></td>
                    <td>API key for this specific client</td>
                    <td>sk_live_abc123def456...</td>
                </tr>
            </tbody>
        </table>
    </li>
</ol>

<h2>Recommended Setup Structure</h2>

<h3>Example Multi-Client Configuration</h3>
<div class="feature-highlight">
    <h4>Sample Client Setup</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Client</th>
                <th>Bank Account</th>
                <th>Primary Currency</th>
                <th>Use Case</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Client A</td>
                <td>Airwallex Client A - USD</td>
                <td>USD</td>
                <td>US operations</td>
            </tr>
            <tr>
                <td>Client B</td>
                <td>Airwallex Client B - EUR</td>
                <td>EUR</td>
                <td>European operations</td>
            </tr>
            <tr>
                <td>Client C</td>
                <td>Airwallex Client C - GBP</td>
                <td>GBP</td>
                <td>UK operations</td>
            </tr>
            <tr>
                <td>Client D</td>
                <td>Airwallex Client D - Multi</td>
                <td>USD</td>
                <td>Multi-currency operations</td>
            </tr>
        </tbody>
    </table>
</div>

<h2>Transaction Flow</h2>

<h3>How Transactions are Processed</h3>
<p>When transactions are synced, the system follows this simple logic:</p>

<ol>
    <li><strong>Client Identification:</strong> Identify which Airwallex client the transaction belongs to</li>
    <li><strong>Account Assignment:</strong> Assign transaction to the client's designated bank account</li>
    <li><strong>Transaction Creation:</strong> Create Bank Transaction record with assigned account</li>
</ol>

<p><strong>No currency mapping needed!</strong> Each client's transactions automatically go to their assigned bank account, regardless of currency.</p>

<h2>Best Practices</h2>

<h3>Naming Conventions</h3>
<ul>
    <li><strong>Consistent Naming:</strong> Use "Airwallex {Client Name} - {Primary Currency}" format</li>
    <li><strong>Clear Identification:</strong> Include client identifier or business unit</li>
    <li><strong>Currency Indication:</strong> Include primary currency for clarity</li>
</ul>

<h3>Account Organization</h3>
<ul>
    <li><strong>Separate Clients:</strong> Each client should have its own dedicated bank account</li>
    <li><strong>Multi-Currency Support:</strong> Single account can handle multiple currencies</li>
    <li><strong>Company Assignment:</strong> Ensure accounts are assigned to correct company</li>
</ul>

<h2>Troubleshooting</h2>

<h3>Bank Account Not Found</h3>
<div class="alert alert-warning">
    <strong>Problem:</strong> Error: "Bank account not found for client [XXX]"
    <br><strong>Solutions:</strong>
    <ul>
        <li>Verify the bank account exists in ERPNext</li>
        <li>Check the bank account is spelled correctly in client configuration</li>
        <li>Ensure the bank account is active and not disabled</li>
    </ul>
</div>

<h3>Multiple Clients, Same Account</h3>
<div class="alert alert-warning">
    <strong>Problem:</strong> Multiple clients using the same bank account
    <br><strong>Solutions:</strong>
    <ul>
        <li>Create separate bank accounts for each client</li>
        <li>Update client configurations with unique bank accounts</li>
        <li>Review transaction segregation requirements</li>
    </ul>
</div>

<div style="margin-top: 40px; text-align: center;">
    <a href="/docs/transaction-sync" class="btn btn-primary">Next: Transaction Sync ‚Üí</a>
</div>
{% endblock %}
